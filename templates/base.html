<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{% block title %}Cloud Index{% endblock %}</title>
        <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}" />
        <!-- 资源性能优化：预连接第三方 CDN，减少 TLS 握手耗时 -->
        <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
        <link rel="dns-prefetch" href="//cdnjs.cloudflare.com" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
        <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}" />
        {% block head_extra %}{% endblock %}
    </head>
    <body {% block body_attrs %}{% endblock %}>
        {% block content %}{% endblock %}
        <div id="appDialog" class="app-dialog" role="dialog" aria-modal="true" aria-hidden="true" hidden>
            <div class="app-dialog__backdrop" data-dialog-dismiss="true"></div>
            <div class="app-dialog__panel" role="document">
                <h2 class="app-dialog__title" id="appDialogTitle"></h2>
                <div class="app-dialog__message" id="appDialogMessage"></div>
                <div class="app-dialog__input" id="appDialogInputWrapper" hidden>
                    <input type="text" id="appDialogInput" autocomplete="off" />
                </div>
                <div class="app-dialog__actions">
                    <button type="button" class="app-dialog__btn app-dialog__cancel" id="appDialogCancel">取消</button>
                    <button type="button" class="app-dialog__btn app-dialog__confirm" id="appDialogConfirm">
                        确定
                    </button>
                </div>
            </div>
        </div>
        <script defer src="{{ url_for('static', filename='js/ui-utils.js') }}"></script>
        <script defer src="{{ url_for('static', filename='js/dialog.js') }}"></script>
        <script defer src="{{ url_for('static', filename='js/theme.js') }}"></script>
        <script defer src="{{ url_for('static', filename='js/utilities.js') }}"></script>
        <script defer src="{{ url_for('static', filename='js/file-operations.js') }}"></script>
        <script defer src="{{ url_for('static', filename='js/selection.js') }}"></script>
        <script defer src="{{ url_for('static', filename='js/download.js') }}"></script>
        <script defer src="{{ url_for('static', filename='js/preview.js') }}"></script>
        <script>
            document.addEventListener("DOMContentLoaded", () => {
                window.DialogUtils.initDialog();
                window.ThemeUtils.initThemeAndView();
                window.UtilityFuncs.unregisterServiceWorker();
                window.UtilityFuncs.registerModalHandlers();
                window.SelectionUtils.attachEntryCheckboxListeners();
                window.DownloadUtils.attachDownloadButtonListeners();
            });
        </script>
        {% block scripts %}{% endblock %}
    </body>
</html>
